!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t||self).limited={})}(this,function(t){function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function i(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}var o=function(){function t(t){var e=t.y;this.x=t.x,this.y=e}return t.prototype.plus=function(e){return new t({x:this.x+e.x,y:this.y+e.y})},t}(),r=function(){function t(t){var e=t.type,n=t.position,i=t.width,r=t.height,s=t.color,a=t.speed;this.name=t.name,this.type=e,this.position=n||new o({x:0,y:0}),this.width=i,this.height=r,this.color=s,this.speed=a||new o({x:0,y:0})}var n=t.prototype;return n.getCenter=function(){return new o({x:this.position.x+this.width/2,y:this.position.y+this.height/2})},n.update=function(n){return new t(e({},this,{position:new o({x:this.position.x+this.speed.x*n,y:this.position.y+this.speed.y*n})}))},t}(),s=function(){var t=this;this.keyState={},this.keyDownHandler=function(e){e.preventDefault(),t.keyState[e.keyCode||e.which]=!0},this.keyUpHandler=function(e){e.preventDefault(),t.keyState[e.keyCode||e.which]=!1},window.addEventListener("keydown",this.keyDownHandler),window.addEventListener("keyup",this.keyUpHandler)},a=function(){function t(t){var e=t.textObjects,n=t.state;this.gameObjects=t.gameObjects,this.textObjects=e,this.state=n,this.keyboard=new s}var n=t.prototype;return n.setGameObjects=function(t){this.gameObjects=t},n.getGameObject=function(t){return this.gameObjects.find(function(e){return e.name===t})},n.getGameObjectsByType=function(t){return this.gameObjects.map(function(e){return e.type===t})},n.getGameObjects=function(){return this.gameObjects},n.getTextObject=function(t){return this.textObjects.find(function(e){return e.label===t})},n.deleteTextObject=function(t){var e=this.textObjects.findIndex(function(e){return e.label===t});-1!==e&&this.textObjects.splice(e,1)},n.update=function(n){for(var o,r=[],s=i(this.gameObjects);!(o=s()).done;)r.push(o.value.update(n));return new t(e({},this,{gameObjects:r}))},t}(),c=function(){function t(t){var e=t.font;Object.assign(this,{content:t.content,label:t.label,position:t.position,font:void 0===e?"18px verdana":e})}var e=t.prototype;return e.write=function(t){t.font=this.font,t.fillText(this.content,this.position.x,this.position.y)},e.update=function(t){return this.content=t,this},t}(),u=function(){function t(t){var e=t.width,n=t.height;this.canvas=document.getElementById(t.canvasId),this.canvas.width=e,this.canvas.height=n,this.context=this.canvas.getContext("2d")}var e=t.prototype;return e.clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.renderObjects=function(t,e,n){for(var o,r=this,s=function(){var t=o.value,i=t.name,s=t.width,a=t.height,c=t.color,u=t.position,h=u.x,f=u.y;if(void 0===i)throw Error("name not found");if(void 0===h)throw Error("x not found");if(void 0===f)throw Error("y not found");if(void 0===s)throw Error("width not found");if(void 0===a)throw Error("height not found");if(void 0===c)throw Error("color not found");if(e.length){var d=e.find(function(t){return t.name===i});d&&(h=h*n+d.position.x*(1-n),f=f*n+d.position.y*(1-n))}r.context.fillStyle=c,r.context.fillRect(h,f,s,a)},a=i(t);!(o=a()).done;)s()},e.write=function(t){for(var e,n=i(t);!(e=n()).done;)e.value.write(this.context)},t}(),h={currentFps:1,framesThisSecond:0,lastFpsUpdate:0,decayRatio:.25,MS_PER_UPDATE:Number((1e3/60).toFixed(1))};t.GameObject=r,t.GameScreen=u,t.Keyboard=s,t.State=a,t.Text=c,t.Vector=o,t.keyCodes={UP:38,DOWN:40,RIGHT:39,LEFT:37,W:87,A:65,S:83,D:68,SPACE:32},t.start=function(t){var e,n=t.firstState,i=t.screen,o=t.update,r=h.MS_PER_UPDATE,s=0,a=window.performance.now(),u=n;!function t(n){var f=n-a;for(a=n,s+=f,n>h.lastFpsUpdate+1e3&&(h.currentFps=h.decayRatio*h.framesThisSecond+(1-h.decayRatio)*h.currentFps,h.lastFpsUpdate=n,h.framesThisSecond=0),h.framesThisSecond++;s>=r;)u=o({state:e=u,dt:r}),s-=r;!function(t,e){var n=e.currentState,i=e.previousState,o=e.interpolation,r=e.texts;t.clear(),t.write(r);var s=i?i.getGameObjects():[];t.renderObjects(n.getGameObjects(),s,o)}(i,{currentState:u,previousState:e,texts:[new c({content:"FPS: "+Math.round(h.currentFps),position:{x:1400,y:30},label:"FPS"})].concat(u.textObjects),interpolation:s/h.MS_PER_UPDATE}),window.requestAnimationFrame(t)}(window.performance.now())}});
//# sourceMappingURL=limited.umd.js.map
