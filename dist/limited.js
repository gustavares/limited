function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function n(t,n){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}var r=function(){function t(t){var e=t.y;this.x=t.x,this.y=e}return t.prototype.plus=function(e){return new t({x:this.x+e.x,y:this.y+e.y})},t}(),i=function(){function e(t){var e=t.type,n=t.position,i=t.width,o=t.height,a=t.color,s=t.speed;this.name=t.name,this.type=e,this.position=n||new r({x:0,y:0}),this.width=i,this.height=o,this.color=a,this.speed=s||new r({x:0,y:0})}return e.prototype.update=function(n){return new e(t({},this,{position:new r({x:this.position.x+this.speed.x*n,y:this.position.y+this.speed.y*n})}))},e}(),o={UP:38,DOWN:40,RIGHT:39,LEFT:37,W:87,A:65,S:83,D:68,SPACE:32},a=function(){var t=this;this.keyState={},this.keyDownHandler=function(e){e.preventDefault(),t.keyState[e.keyCode||e.which]=!0},this.keyUpHandler=function(e){e.preventDefault(),t.keyState[e.keyCode||e.which]=!1},window.addEventListener("keydown",this.keyDownHandler),window.addEventListener("keyup",this.keyUpHandler)},s=function(){function e(t){var e=t.textObjects,n=t.state;this.gameObjects=t.gameObjects,this.textObjects=e,this.state=n,this.keyboard=new a}var r=e.prototype;return r.setGameObjects=function(t){this.gameObjects=t},r.getGameObject=function(t){return this.gameObjects.find(function(e){return e.name===t})},r.getGameObjectsByType=function(t){return this.gameObjects.map(function(e){return e.type===t})},r.getGameObjects=function(){return this.gameObjects},r.getTextObject=function(t){return this.textObjects.find(function(e){return e.label===t})},r.deleteTextObject=function(t){var e=this.textObjects.findIndex(function(e){return e.label===t});-1!==e&&this.textObjects.splice(e,1)},r.update=function(r){for(var i,o=[],a=n(this.gameObjects);!(i=a()).done;)o.push(i.value.update(r));return new e(t({},this,{gameObjects:o}))},e}(),c=function(){function t(t){var e=t.font;Object.assign(this,{content:t.content,label:t.label,position:t.position,font:void 0===e?"18px verdana":e})}var e=t.prototype;return e.write=function(t){t.font=this.font,t.fillText(this.content,this.position.x,this.position.y)},e.update=function(t){return this.content=t,this},t}(),u=function(){function t(t){var e=t.width,n=t.height;this.canvas=document.getElementById(t.canvasId),this.canvas.width=e,this.canvas.height=n,this.context=this.canvas.getContext("2d")}var e=t.prototype;return e.clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.renderObjects=function(t,e,r){for(var i,o=this,a=function(){var t=i.value,n=t.name,a=t.width,s=t.height,c=t.color,u=t.position,h=u.x,f=u.y;if(void 0===n)throw Error("name not found");if(void 0===h)throw Error("x not found");if(void 0===f)throw Error("y not found");if(void 0===a)throw Error("width not found");if(void 0===s)throw Error("height not found");if(void 0===c)throw Error("color not found");if(e.length){var d=e.find(function(t){return t.name===n});d&&(h=h*r+d.position.x*(1-r),f=f*r+d.position.y*(1-r))}o.context.fillStyle=c,o.context.fillRect(h,f,a,s)},s=n(t);!(i=s()).done;)a()},e.write=function(t){for(var e,r=n(t);!(e=r()).done;)e.value.write(this.context)},t}(),h={currentFps:1,framesThisSecond:0,lastFpsUpdate:0,decayRatio:.25,MS_PER_UPDATE:Number((1e3/60).toFixed(1))};function f(t){var e=t.screen,n=t.update,r=[t.firstState],i=h.MS_PER_UPDATE,o=0,a=window.performance.now();!function t(s){var u=s-a;for(a=s,o+=u,s>h.lastFpsUpdate+1e3&&(h.currentFps=h.decayRatio*h.framesThisSecond+(1-h.decayRatio)*h.currentFps,h.lastFpsUpdate=s,h.framesThisSecond=0),h.framesThisSecond++;o>=i;){var f=n({state:r[r.length-1],dt:i});r.push(f),o-=i}var d=r[r.length-1];!function(t,e){var n=e.currentState,r=e.previousState,i=e.interpolation,o=e.texts;t.clear(),t.write(o);var a=r?r.getGameObjects():[];t.renderObjects(n.getGameObjects(),a,i)}(e,{currentState:d,previousState:r[r.length-2],texts:[new c({content:"FPS: "+Math.round(h.currentFps),position:{x:1400,y:30},label:"FPS"})].concat(d.textObjects),interpolation:o/h.MS_PER_UPDATE}),window.requestAnimationFrame(t)}(window.performance.now())}export{i as GameObject,u as GameScreen,a as Keyboard,s as State,c as Text,r as Vector,o as keyCodes,f as start};
//# sourceMappingURL=limited.js.map
