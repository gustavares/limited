function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,n){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}var i=function(){function t(t){var e=t.y;this.x=t.x,this.y=e}return t.prototype.plus=function(e){return new t({x:this.x+e.x,y:this.y+e.y})},t}(),r=function(){function e(t){var e=t.type,n=t.position,r=t.width,o=t.height,a=t.color,s=t.speed;this.name=t.name,this.type=e,this.position=n||new i({x:0,y:0}),this.width=r,this.height=o,this.color=a,this.speed=s||new i({x:0,y:0})}var n=e.prototype;return n.getCenter=function(){return new i({x:this.position.x+this.width/2,y:this.position.y+this.height/2})},n.update=function(n){return new e(t({},this,{position:new i({x:this.position.x+this.speed.x*n,y:this.position.y+this.speed.y*n})}))},e}(),o={UP:38,DOWN:40,RIGHT:39,LEFT:37,W:87,A:65,S:83,D:68,SPACE:32},a=function(){var t=this;this.keyState={},this.keyDownHandler=function(e){e.preventDefault(),t.keyState[e.keyCode||e.which]=!0},this.keyUpHandler=function(e){e.preventDefault(),t.keyState[e.keyCode||e.which]=!1},window.addEventListener("keydown",this.keyDownHandler),window.addEventListener("keyup",this.keyUpHandler)},s=function(){function e(t){var e=t.textObjects,n=t.state;this.gameObjects=t.gameObjects,this.textObjects=e,this.state=n,this.keyboard=new a}var i=e.prototype;return i.setGameObjects=function(t){this.gameObjects=t},i.getGameObject=function(t){return this.gameObjects.find(function(e){return e.name===t})},i.getGameObjectsByType=function(t){return this.gameObjects.map(function(e){return e.type===t})},i.getGameObjects=function(){return this.gameObjects},i.getTextObject=function(t){return this.textObjects.find(function(e){return e.label===t})},i.deleteTextObject=function(t){var e=this.textObjects.findIndex(function(e){return e.label===t});-1!==e&&this.textObjects.splice(e,1)},i.update=function(i){for(var r,o=[],a=n(this.gameObjects);!(r=a()).done;)o.push(r.value.update(i));return new e(t({},this,{gameObjects:o}))},e}(),c=function(){function t(t){var e=t.font;Object.assign(this,{content:t.content,label:t.label,position:t.position,font:void 0===e?"18px verdana":e})}var e=t.prototype;return e.write=function(t){t.font=this.font,t.fillText(this.content,this.position.x,this.position.y)},e.update=function(t){return this.content=t,this},t}(),h=function(){function t(t){var e=t.width,n=t.height;this.canvas=document.getElementById(t.canvasId),this.canvas.width=e,this.canvas.height=n,this.context=this.canvas.getContext("2d")}var e=t.prototype;return e.clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.renderObjects=function(t,e,i){for(var r,o=this,a=function(){var t=r.value,n=t.name,a=t.width,s=t.height,c=t.color,h=t.position,u=h.x,f=h.y;if(void 0===n)throw Error("name not found");if(void 0===u)throw Error("x not found");if(void 0===f)throw Error("y not found");if(void 0===a)throw Error("width not found");if(void 0===s)throw Error("height not found");if(void 0===c)throw Error("color not found");if(e.length){var d=e.find(function(t){return t.name===n});d&&(u=u*i+d.position.x*(1-i),f=f*i+d.position.y*(1-i))}o.context.fillStyle=c,o.context.fillRect(u,f,a,s)},s=n(t);!(r=s()).done;)a()},e.write=function(t){for(var e,i=n(t);!(e=i()).done;)e.value.write(this.context)},t}(),u={currentFps:1,framesThisSecond:0,lastFpsUpdate:0,decayRatio:.25,MS_PER_UPDATE:Number((1e3/60).toFixed(1))};function f(t){var e=t.screen,n=t.update,i=[t.firstState],r=u.MS_PER_UPDATE,o=0,a=window.performance.now();!function t(s){var h=s-a;for(a=s,o+=h,s>u.lastFpsUpdate+1e3&&(u.currentFps=u.decayRatio*u.framesThisSecond+(1-u.decayRatio)*u.currentFps,u.lastFpsUpdate=s,u.framesThisSecond=0),u.framesThisSecond++;o>=r;){var f=n({state:i[i.length-1],dt:r});i.push(f),o-=r}var d=i[i.length-1];!function(t,e){var n=e.currentState,i=e.previousState,r=e.interpolation,o=e.texts;t.clear(),t.write(o);var a=i?i.getGameObjects():[];t.renderObjects(n.getGameObjects(),a,r)}(e,{currentState:d,previousState:i[i.length-2],texts:[new c({content:"FPS: "+Math.round(u.currentFps),position:{x:1400,y:30},label:"FPS"})].concat(d.textObjects),interpolation:o/u.MS_PER_UPDATE}),window.requestAnimationFrame(t)}(window.performance.now())}export{r as GameObject,h as GameScreen,a as Keyboard,s as State,c as Text,i as Vector,o as keyCodes,f as start};
//# sourceMappingURL=limited.js.map
